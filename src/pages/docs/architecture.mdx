import CodeBlockSwitch, { Tab } from '@src/components/CodeBlockSwitch'
import Layout from '@src/components/docs/Layout'

export const meta = { title: 'Architecture' }

# Architecture

This page provides a brief overview of the Peregrine API to discuss terms and
concepts before diving a bit deeper into the implementation details.

## Overview

For an iOS or Android app, Peregrine has a library for web code and a library
for native code. The native library provides the [Web Frame](#web-frames),
which encapsulates the web view and a server for web\<-\>native connection,
often called the _bridge_. The web library initiates this connection and acts
as a client for the web app.

Developers build [connectors](#connectors) to define native functionality in
the form of [methods](#methods) for request/response-style communication and
[observables](#observables) for server-side events.

### Web Frames

Web Frames are instances of the `WebFrame` class in iOS or Android.
Essentially, they are meant to represent a single, supercharged web view. Web
Frames are set up specifically for the web content they display, e.g. web view
configuration and native access are tailored. Many hybrid developers may only
use one Web Frame for their entire app--and that's fine! Others may want to
have a mix of web and native views.

Web Frames encapsulate the web view itself, [path handlers](#path-handlers),
and [connectors](#connectors).

### Connectors

Connectors are implementations of the `Connector` interface in iOS or Android.
Typically classes, connectors are instantiated and provided to Web Frame
configuration. Developers can implement any constructor logic they wish, as
long as each connector has two properties: `methods` and `observables`.

#### Methods

The `methods` property is a map of strings to connector methods.

In the following example, this method responds with the same data that the
client sent.

<CodeBlockSwitch>
  <Tab name="iOS">
```swift
func echo(call: Call) {
    call.respond(call.request.data)
}
```
  </Tab>
  <Tab name="Android">
```kotlin
fun echo(call: Call) {
    call.respond(call.request.data)
}
```
  </Tab>
</CodeBlockSwitch>

#### Observables

The `observables` property is a map of strings to event publishers, which must
emit `Event` instances.



### Path Handlers

wow

export default ({ children }) => <Layout meta={meta}>{children}</Layout>
